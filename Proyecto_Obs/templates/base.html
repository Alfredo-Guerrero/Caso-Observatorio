<!DOCTYPE html>
{% load static %}
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>{% block title %}INCIDENCIAS{% endblock %}</title>
    
        <!-- Agregar el icono de la pestaña del navegador -->
        <link rel="icon" href="{% static 'assets/dist/img/icono.png' %}" type="image/png" />
    
        <!-- Google Font: Source Sans Pro -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback" />
        
        <!-- Font Awesome -->
        <link rel="stylesheet" href="{% static 'assets/plugins/fontawesome-free/css/all.min.css' %}" />
        
        <!-- Ionicons -->
        <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" />
    
        <!-- DataTables -->
        <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap5.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css"/>
        
        <!-- DataTables Responsive -->
        <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.dataTables.min.css">
        
        <!-- DataTables Buttons -->
        <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.dataTables.min.css">
        
    
        <!-- Tempusdominus Bootstrap 4 -->
        <link rel="stylesheet" href="{% static 'assets/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css' %}" />
        
        <!-- iCheck -->
        <link rel="stylesheet" href="{% static 'assets/plugins/icheck-bootstrap/icheck-bootstrap.min.css' %}" />
        
        <!-- JQVMap -->
        <link rel="stylesheet" href="{% static 'assets/plugins/jqvmap/jqvmap.min.css' %}" />

        <!-- Theme style -->
        <link rel="stylesheet" href="{% static 'assets/dist/css/adminlte.min.css' %}" />
        
        <!-- overlayScrollbars -->
        <link rel="stylesheet" href="{% static 'assets/plugins/overlayScrollbars/css/OverlayScrollbars.min.css' %}" />
        
        <!-- Daterange picker -->
        <link rel="stylesheet" href="{% static 'assets/plugins/daterangepicker/daterangepicker.css' %}" />
        
        <!-- Summernote -->
        <link rel="stylesheet" href="{% static 'assets/plugins/summernote/summernote-bs4.min.css' %}" />
    
        <!-- SweetAlert2 -->
        <link rel="stylesheet" href="{% static 'assets/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css' %}">
        <!-- Toastr -->
        <link rel="stylesheet" href="{% static 'assets/plugins/toastr/toastr.min.css' %}">

        <link rel="stylesheet" href="{% static 'assets/plugins/select2/css/select2.min.css' %}">

        {% block head %}{% endblock %}

    </head>
<body class="hold-transition sidebar-mini layout-fixed">

    <div class="wrapper">
        <!-- Preloader -->
        <!--{% include "partials/preloader.html" %}-->
        <!-- Navbar -->
        {% include "partials/navbar_main.html" %}
        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            {% include "partials/slidebar.html" %}
        </aside>
        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <div class="content-header">
                <div class="container-fluid">
                    {% block content_header %}
                    
                    {% endblock %}
                </div>
            </div>
            <!-- Main content -->
            <section class="content">
                <div class="container-fluid">
                    {% block content %}{% endblock %}
                </div>
            </section>
        </div>
        <!-- Footer -->
        <footer class="main-footer">
            {% include "partials/footer.html" %}
        </footer>
        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
            <!-- Control sidebar content goes here -->
        </aside>
    </div>

<!-- Ventana modal con información sobre el sistema -->
<div class="modal fade" id="infoModal" tabindex="-1" role="dialog" aria-labelledby="infoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document"> <!-- Agrega 'modal-lg' para hacer el modal más grande -->
    <div class="modal-content">
        <div class="modal-header">
        <h5 class="modal-title" id="infoModalLabel">Información del Sistema</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
        </button>
        </div>
        <div class="modal-body text-justify small"> <!-- Agrega 'text-justify' para justificar el texto -->


        </div>
        <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        </div>
    </div>
    </div>
</div>

<!-- jQuery -->
<script src="{% static 'assets/plugins/jquery/jquery.min.js' %}"></script>
<!-- jQuery UI 1.11.4 -->
<script src="{% static 'assets/plugins/jquery-ui/jquery-ui.min.js' %}"></script>
    
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
    $.widget.bridge("uibutton", $.ui.button);
</script>

<!-- Bootstrap 4 -->
<script src="{% static 'assets/plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

<!-- Ekko Lightbox -->
<script src="{% static 'assets/plugins/ekko-lightbox/ekko-lightbox.min.js' %}"></script>

<!-- Sparkline -->
<script src="{% static 'assets/plugins/sparklines/sparkline.js' %}"></script>

<!-- JQVMap -->
<script src="{% static 'assets/plugins/jqvmap/jquery.vmap.min.js' %}"></script>
<script src="{% static 'assets/plugins/jqvmap/maps/jquery.vmap.usa.js' %}"></script>

<!-- jQuery Knob Chart -->
<script src="{% static 'assets/plugins/jquery-knob/jquery.knob.min.js' %}"></script>

<!-- daterangepicker -->
<script src="{% static 'assets/plugins/moment/moment.min.js' %}"></script>
<script src="{% static 'assets/plugins/daterangepicker/daterangepicker.js' %}"></script>

<!-- Tempusdominus Bootstrap 4 -->
<script src="{% static 'assets/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js' %}"></script>

<!-- Summernote -->
<script src="{% static 'assets/plugins/summernote/summernote-bs4.min.js' %}"></script>

<!-- overlayScrollbars -->
<script src="{% static 'assets/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js' %}"></script>

<!-- AdminLTE App -->
<script src="{% static 'assets/dist/js/adminlte.js' %}"></script>

<!-- Filterizr-->
<script src="{% static 'assets/plugins/filterizr/jquery.filterizr.min.js' %}"></script>

<!-- DataTables -->
<script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>

<!-- DataTables Responsive -->
<script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>

<!-- JSZip (required for Excel export) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<!-- PDFMake (required for PDF export) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

<!-- DataTables Buttons -->
<script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.print.min.js"></script>


<!-- SweetAlert2 -->
<script src="{% static 'assets/plugins/sweetalert2/sweetalert2.min.js' %}"></script>
<!-- Toastr -->
<script src="{% static 'assets/plugins/toastr/toastr.min.js' %}"></script>

<script src="{% static 'assets/plugins/select2/js/select2.min.js' %}"></script>

<!-- librerías jsPDF y html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

<!-- DataTables Initialization -->
<script>
    $(document).ready(function() {

        // Activar/desactivar modo oscuro
        const darkModeToggle = $('#darkModeToggle');
        darkModeToggle.on('click', function() {
            // Alternar la clase para activar/desactivar el modo oscuro
            $('body').toggleClass('dark-mode');

            // Guardar la preferencia del usuario en localStorage
            const darkModeEnabled = $('body').hasClass('dark-mode');
            localStorage.setItem('darkModeEnabled', darkModeEnabled.toString());
        });

        // Verificar si el usuario ha activado el modo oscuro anteriormente
        const isDarkModeEnabled = localStorage.getItem('darkModeEnabled') === 'true';
        if (isDarkModeEnabled) {
            $('body').addClass('dark-mode');
        }

        var table = $('#dataTable').DataTable({
            dom: 'Blfrtip',
            buttons: [
                'copy', 'csv', 'excel',
                {
                    extend: 'pdf',
                    orientation: 'landscape' // Configura la orientación del PDF a paisaje
                },
                'print'
            ],
            "language": {
                "lengthMenu": "Mostrar _MENU_ registros por página",
                "zeroRecords": "No se encontraron registros",
                "info": "Mostrando _PAGE_ de _PAGES_ páginas",
                "infoEmpty": "No hay registros disponibles",
                "infoFiltered": "(filtrado de _MAX_ registros totales)",
                "search": "Buscar:",
                "paginate": {
                    "next": "Siguiente",
                    "previous": "Anterior"
                }
            },
            "responsive": true,
            "paging": true,
            "searching": true,
            "ordering": true,
            "order": [[0, "desc"]],
            "pageLength": 20,
            "lengthMenu": [[20, 50, 100, -1], [20, 50, 100, "Todos"]] 
        });

        var table2 = $('#dataTable2').DataTable({
            dom: 'Blfrtip',
            buttons: [
                'excel','print'
            ],
            "language": {
                "lengthMenu": "Mostrar _MENU_ registros por página",
                "zeroRecords": "No se encontraron registros",
                "info": "Mostrando _PAGE_ de _PAGES_ páginas",
                "infoEmpty": "No hay registros disponibles",
                "infoFiltered": "(filtrado de _MAX_ registros totales)",
                "search": "Buscar:",
                "paginate": {
                    "next": "Siguiente",
                    "previous": "Anterior"
                }
            },
            "paging": true,
            "searching": true,
            "responsive": false, 
            "ordering": true,
            "pageLength": 20,
            "lengthMenu": [[20, 50, 100, -1], [20, 50, 100, "Todos"]] 
        });


        var table3 = $('#dataTable3').DataTable({
            dom: 'Blfrtip',
            buttons: [
                'excel','print'
            ],
            "language": {
                "lengthMenu": "Mostrar _MENU_ registros por página",
                "zeroRecords": "No se encontraron registros",
                "info": "Mostrando _PAGE_ de _PAGES_ páginas",
                "infoEmpty": "No hay registros disponibles",
                "infoFiltered": "(filtrado de _MAX_ registros totales)",
                "search": "Buscar:",
                "paginate": {
                    "next": "Siguiente",
                    "previous": "Anterior"
                }
            },
            "paging": true,
            "searching": true,
            "responsive": false, 
            "ordering": true,
            "order": [[0, "desc"]],
            "pageLength": 10,
            "lengthMenu": [[10, 20, 50, 100, -1], [10, 20, 50, 100, "Todos"]] 
        });

        table.buttons().container()
            .find('.dt-button').removeClass('dt-button').addClass('btn btn-sm')
            .each(function() {
                var btnClass = '';
                var btnIcon = '';
                var btnText = $(this).text();
                switch (btnText) {
                    case 'Copy':
                        btnClass = 'btn-dark';
                        btnIcon = 'fas fa-copy';
                        break;
                    case 'CSV':
                        btnClass = 'btn-dark';
                        btnIcon = 'fas fa-file-csv';
                        break;
                    case 'Excel':
                        btnClass = 'btn-dark';
                        btnIcon = 'fas fa-file-excel';
                        break;
                    case 'PDF':
                        btnClass = 'btn-dark';
                        btnIcon = 'fas fa-file-pdf';
                        break;
                    case 'Print':
                        btnClass = 'btn-dark mr-2';
                        btnIcon = 'fas fa-print';
                        break;
                }
                $(this).addClass(btnClass);
                $(this).html('<i class="' + btnIcon + '"></i> ' + btnText);
            });

            table2.buttons().container()
            .find('.dt-button').removeClass('dt-button').addClass('btn btn-sm')
            .each(function() {
                var btnClass = '';
                var btnIcon = '';
                var btnText = $(this).text();
                switch (btnText) {
        
                    case 'Excel':
                        btnClass = 'btn-dark';
                        btnIcon = 'fas fa-file-excel';
                        break;
                    case 'Print':
                        btnClass = 'btn-dark mr-2';
                        btnIcon = 'fas fa-print';
                        break;
                }
                $(this).addClass(btnClass);
                $(this).html('<i class="' + btnIcon + '"></i> ' + btnText);
            });


            table3.buttons().container()
            .find('.dt-button').removeClass('dt-button').addClass('btn btn-sm')
            .each(function() {
                var btnClass = '';
                var btnIcon = '';
                var btnText = $(this).text();
                switch (btnText) {
        
                    case 'Excel':
                        btnClass = 'btn-dark';
                        btnIcon = 'fas fa-file-excel';
                        break;
                    case 'Print':
                        btnClass = 'btn-dark mr-2';
                        btnIcon = 'fas fa-print';
                        break;
                }
                $(this).addClass(btnClass);
                $(this).html('<i class="' + btnIcon + '"></i> ' + btnText);
            });


                        table2.buttons().container()
            .find('.dt-button').removeClass('dt-button').addClass('btn btn-sm')
            .each(function() {
                var btnClass = '';
                var btnIcon = '';
                var btnText = $(this).text();
                switch (btnText) {
        
                    case 'Excel':
                        btnClass = 'btn-dark';
                        btnIcon = 'fas fa-file-excel';
                        break;
                    case 'Print':
                        btnClass = 'btn-dark mr-2';
                        btnIcon = 'fas fa-print';
                        break;
                }
                $(this).addClass(btnClass);
                $(this).html('<i class="' + btnIcon + '"></i> ' + btnText);
            });

        // Inicialización de Select2
        $('.js-example-basic-single').select2();
        
        // Inicializaciion envio de correos
        $('#compose-textarea').summernote()
    });
</script>
{% block js %}
{% endblock %}
</body>
</html>
